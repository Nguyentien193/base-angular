<form [formGroup]="formArrayBunkering" (submit)="onSubmit()" novalidate>
  <div class="col-12 mb-5">
    <div class="display-flex justify-content-between form-arr">
      <p>New</p>
      <div>
        <p>Playlist Name</p>
        <input matInput formControlName="name" />
      </div>
      <button type="button" mat-icon-button (click)="onClickAdd()">Add</button>
    </div>

    <p-table #dt [value]="datalist" dataKey="id" [metaKeySelection]="true">
      <ng-template pTemplate="header" datalist>
        <tr>
          <th pSortableColumn="quantityFo">quantity FO</th>
          <th pSortableColumn="quantityGo">quantity GO</th>
          <th pSortableColumn="ImportPriceFO">Import price FO</th>
          <th pSortableColumn="ImportPriceGO">Import price GO</th>
          <th pSortableColumn="ImportBarging">Import Barging</th>
          <th pSortableColumn="ExportPriceFO">Export price FO</th>
          <th pSortableColumn="ExportPriceGO">Export price GO</th>
          <th pSortableColumn="ExportBarging">Export Barging</th>
          <th pSortableColumn="Edit">Action</th>
        </tr>
      </ng-template>

      <!-- <ng-template pTemplate="body" let-item>
        <tr class="p-selectable-row">
          <td>
            <span *ngIf="!item.Edit">{{ item.quantityFo }}</span>
            <input
              class="inp-quantity"
              *ngIf="item.Edit"
              [(ngModel)]="item.quantityFo"
              type="text"
              formControlName="quantityFo"
              name="quantityFo"
            />
          </td>
          <td>
            <span *ngIf="!item.Edit">{{ item.quantityGo }}</span>
            <input
              class="inp-quantity"
              *ngIf="item.Edit"
              [(ngModel)]="item.quantityGo"
              type="text"
              formControlName="quantityGo"
              name="quantityGo"
            />
          </td>
          <td>
            <span *ngIf="!item.Edit">{{ item.ImportPriceFO }}</span>
            <input
              class="inp-quantity"
              *ngIf="item.Edit"
              [(ngModel)]="item.ImportPriceFO"
              type="text"
              formControlName="importPriceFo"
              name="importPriceFo"
            />
          </td>
          <td>
            <span *ngIf="!item.Edit">{{ item.ImportPriceGO }}</span>
            <input
              class="inp-quantity"
              *ngIf="item.Edit"
              [(ngModel)]="item.ImportPriceGO"
              type="text"
              formControlName="importPriceGo"
              name="importPriceGo"
            />
          </td>
          <td>
            <span *ngIf="!item.Edit">{{ item.ImportBarging }}</span>
            <input
              class="inp-quantity"
              *ngIf="item.Edit"
              [(ngModel)]="item.ImportBarging"
              type="text"
              formControlName="barging"
              name="barging"
            />
          </td>
          <td>
            <span *ngIf="!item.Edit">{{ item.ExportPriceFO }}</span>
            <input
              class="inp-quantity"
              *ngIf="item.Edit"
              [(ngModel)]="item.ExportPriceFO"
              type="text"
            />
          </td>
          <td>
            <span *ngIf="!item.Edit">{{ item.ExportPriceGO }}</span>
            <input
              class="inp-quantity"
              *ngIf="item.Edit"
              [(ngModel)]="item.ExportPriceGO"
              type="text"
            />
          </td>
          <td>
            <span *ngIf="!item.Edit">{{ item.ExportBarging }}</span>
            <input
              class="inp-quantity"
              *ngIf="item.Edit"
              [(ngModel)]="item.ExportBarging"
              type="text"
            />
          </td>
          <td>
            <button class="btn-action" (click)="handleClickEdit(item.id)">
              <i class="pi pi-pencil mr-2"></i>
            </button>
            <button class="btn-action" (click)="handleClickDelete(item.id)">
              <i class="pi pi-trash"></i>
            </button>

            <button
              type="button"
              class="btn-action"
              (click)="handleClickEdit(i)"
            >
              <i class="pi pi-pencil mr-2"></i>
            </button>
            <button type="button" class="btn-action" (click)="removeDetail(i)">
              <i class="pi pi-trash"></i>
            </button>
          </td>
        </tr>
      </ng-template> -->

      <ng-template pTemplate="footer" formArrayName="detail">
        <tr
          class="p-selectable-row"
          *ngFor="let newDetail of detail.controls; let i = index"
          [formGroupName]="i"
        >
          <td>
            <span *ngIf="!isEdit">sds</span>
            <input
              *ngIf="isEdit"
              class="inp-quantity"
              type="text"
              formControlName="quantityFo"
            />
          </td>
          <td>
            <input
              class="inp-quantity"
              type="text"
              matInput
              formControlName="quantityGo"
            />
          </td>
          <td>
            <input
              class="inp-quantity"
              type="text"
              matInput
              formControlName="importPriceFo"
            />
          </td>
          <td>
            <input
              class="inp-quantity"
              type="text"
              matInput
              formControlName="importPriceGo"
            />
          </td>
          <td>
            <input
              class="inp-quantity"
              type="text"
              matInput
              formControlName="barging"
            />
          </td>
          <td>
            <input class="inp-quantity" type="text" />
          </td>
          <td>
            <input class="inp-quantity" type="text" />
          </td>
          <td>
            <input class="inp-quantity" type="text" />
          </td>
          <td>
            <button
              type="button"
              class="btn-action"
              (click)="handleClickEdit(i)"
            >
              <i class="pi pi-pencil mr-2"></i>
            </button>
            <button type="button" class="btn-action" (click)="removeDetail(i)">
              <i class="pi pi-trash"></i>
            </button>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
  <button
    class=""
    pButton
    type="button"
    label="Save"
    (click)="onSubmit()"
  ></button>
</form>
